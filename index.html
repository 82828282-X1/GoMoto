<!DOCTYPE html>
<html>
<head>
  <title>GoMoto - Location & Distance</title>
  <style>
    /* Basic styling for a clean, sleek look */
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
      background-color: #f9f9f9;
      color: #333;
    }
    #map {
      height: 400px;
      width: 100%;
      margin-top: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    #info {
      margin-top: 20px;
    }
    .btn {
      padding: 12px 20px;
      background-color: #ff7a00; /* Orange Button */
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      transition: background-color 0.3s;
    }
    .btn:hover {
      background-color: #e56900; /* Darker Orange on Hover */
    }
    input[type="text"] {
      width: 80%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h2 style="color: #e56900;">GoMoto - Plan Your Ride</h2>

  <!-- Pickup and Destination Inputs -->
  <label>Pickup Location (Detected):</label>
  <input type="text" id="pickupLocation" placeholder="Detecting current location..." readonly><br>

  <label>Destination:</label>
  <input type="text" id="destination" placeholder="Enter destination address"><br>

  <!-- Google Map Display -->
  <div id="map"></div>

  <!-- Information Display and Copy Button -->
  <div id="info">
    <p id="distance">Distance: Calculating...</p>
    <button class="btn" onclick="copyInfo()">Copy Information</button>
  </div>

  <script>
    let pickupCoords, destinationCoords;

    // Themed map style
    const mapStyle = [
      { "elementType": "geometry", "stylers": [{ "color": "#f5f5f5" }] },
      { "elementType": "labels.icon", "stylers": [{ "visibility": "off" }] },
      { "elementType": "labels.text.fill", "stylers": [{ "color": "#616161" }] },
      { "elementType": "labels.text.stroke", "stylers": [{ "color": "#f5f5f5" }] },
      { "featureType": "administrative.land_parcel", "elementType": "labels.text.fill", "stylers": [{ "color": "#bdbdbd" }] },
      { "featureType": "poi", "elementType": "geometry", "stylers": [{ "color": "#eeeeee" }] },
      { "featureType": "poi", "elementType": "labels.text.fill", "stylers": [{ "color": "#757575" }] },
      { "featureType": "poi.park", "elementType": "geometry", "stylers": [{ "color": "#e5e5e5" }] },
      { "featureType": "poi.park", "elementType": "labels.text.fill", "stylers": [{ "color": "#9e9e9e" }] },
      { "featureType": "road", "elementType": "geometry", "stylers": [{ "color": "#ffffff" }] },
      { "featureType": "road.arterial", "elementType": "labels.text.fill", "stylers": [{ "color": "#757575" }] },
      { "featureType": "road.highway", "elementType": "geometry", "stylers": [{ "color": "#dadada" }] },
      { "featureType": "road.highway", "elementType": "labels.text.fill", "stylers": [{ "color": "#616161" }] },
      { "featureType": "road.local", "elementType": "labels.text.fill", "stylers": [{ "color": "#9e9e9e" }] },
      { "featureType": "transit.line", "elementType": "geometry", "stylers": [{ "color": "#e5e5e5" }] },
      { "featureType": "transit.station", "elementType": "geometry", "stylers": [{ "color": "#eeeeee" }] },
      { "featureType": "water", "elementType": "geometry", "stylers": [{ "color": "#c9c9c9" }] },
      { "featureType": "water", "elementType": "labels.text.fill", "stylers": [{ "color": "#9e9e9e" }] }
    ];

    // Initialize Google Map with themed style
    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: -15.7861, lng: 35.0058 },
        zoom: 13,
        styles: mapStyle
      });

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition((position) => {
          pickupCoords = { lat: position.coords.latitude, lng: position.coords.longitude };
          document.getElementById("pickupLocation").value = `Lat: ${pickupCoords.lat.toFixed(5)}, Lng: ${pickupCoords.lng.toFixed(5)}`;
          addMarker(map, pickupCoords, "Pickup Location");
          map.setCenter(pickupCoords);
        });
      } else {
        alert("Geolocation is not supported by this browser.");
      }

      document.getElementById("destination").addEventListener("change", () => calculateRoute(map));
    }

    // Function to add markers
    function addMarker(map, position, title) {
      new google.maps.Marker({
        position: position,
        map: map,
        title: title,
      });
    }

    // Function to calculate the route and distance
    function calculateRoute(map) {
      const destinationAddress = document.getElementById("destination").value;
      const geocoder = new google.maps.Geocoder();

      geocoder.geocode({ address: destinationAddress }, (results, status) => {
        if (status === 'OK') {
          destinationCoords = results[0].geometry.location;
          addMarker(map, destinationCoords, "Destination");

          const directionsService = new google.maps.DirectionsService();
          const directionsRenderer = new google.maps.DirectionsRenderer();
          directionsRenderer.setMap(map);

          directionsService.route(
            {
              origin: pickupCoords,
              destination: destinationCoords,
              travelMode: 'DRIVING',
            },
            (response, status) => {
              if (status === 'OK') {
                directionsRenderer.setDirections(response);
                const distanceText = response.routes[0].legs[0].distance.text;
                document.getElementById("distance").innerText = `Distance: ${distanceText}`;
              } else {
                alert("Could not calculate route.");
              }
            }
          );
        } else {
          alert("Could not find destination address.");
        }
      });
    }

    // Function to copy pickup, destination, and distance info
    function copyInfo() {
      const pickupText = `Pickup Location: Lat ${pickupCoords.lat.toFixed(5)}, Lng ${pickupCoords.lng.toFixed(5)}`;
      const destinationText = `Destination Location: Lat ${destinationCoords.lat().toFixed(5)}, Lng ${destinationCoords.lng().toFixed(5)}`;
      const distanceText = document.getElementById("distance").innerText;

      const infoText = `${pickupText}\n${destinationText}\n${distanceText}`;
      navigator.clipboard.writeText(infoText).then(() => {
        alert("Information copied to clipboard!");
      });
    }
  </script>
  
  <!-- Replace YOUR_API_KEY with your actual Google Maps API key -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDvMFiXrKuTBCoDhsxxoYJ2BJiUgFEgrFg&callback=initMap"></script>
</body>
</html>
